# Ideas
调研了这个juicebox框架，它的tech stack 太老，使用了super base大量的本地化呃，以及合约是用了open zepplin4.x,太老了。
改为使用组合自己构建。

这个third web的是经过审计的，你确认一下，对不对？
1. 基础用Thirdweb
2.参考miso：固定价格销售
3. 释放用sablier，治理用OpenZeppelin Governor，流动性使用uniswapv4
给我个一个逐步完成的施工方案,先完成分阶段销售，可以阶段价格也可以bonding curve价格销售

它把 Launchpad 拆解成了三个乐高积木：
Token Factory: 发币（如果项目方没币）。
Market Factory: 销售方式（这是精华）。它支持 Crowdsale（固定价格）、Dutch Auction（荷兰拍）、Batch Auction（批量拍卖）。
Liquidity Launcher: 销售结束后，自动把钱和币组个 LP 放到 Uniswap（你可以选择不用这个模块）。
精简建议：

MISO 的全套代码比较多，但你可以只 Fork 它的 Crowdsale (固定价格众筹) 模块。
它的 PointList 模块是专门处理白名单验证的，非常简洁。
3. 释放使用sablier

最佳技术组合建议：

1. 销售端 (Fundraising) -> 使用 Thirdweb 的 "Drop" 逻辑
Thirdweb 的 ClaimConditions 是我见过最优雅的实现“分轮次销售”的代码。

代码逻辑： 它的 Struct 设计非常巧妙，支持设置 Snapshot (白名单 merkle root)、价格、限购量、货币类型（ETH或USDT）。
你可以直接 Fork 它的代码，去掉你不用的功能，只保留 ClaimPhases 部分。
2. 代币释放端 (Vesting) -> 使用 Sablier V2
既然你要做“白名单购买后线性释放”，不要自己写 Vesting 合约（容易出 Bug）。

Sablier V2 是目前最先进的流支付协议（2023/2024年更新）。
做法：
白名单用户在你的销售合约里买到的其实是一个 NFT (Sablier Stream)。
这个 NFT 代表了“未来的代币领取权”。
随着时间推移，代币“流”入他们的钱包。
优点： 这种 NFT 本身是可以转让的（如果你允许），或者设为 SBT。这比单纯的锁仓要灵活得多，视觉效果也酷炫。
3. 治理端 (Governance) -> 使用 OpenZeppelin Governor
这是行业标准，不需要创新。确保你的 Token 兼容 ERC20Votes 扩展即可。

这是一个非常典型的 “公平启动” (Fair Launch) 场景。既然你们的目标不是为了短期收割，而是为了筛选出真正的社区支持者，并为公共物品（Public Goods）筹资，那么这种销售机制的核心在于透明、抗机器人、以及价格发现的平滑性。
自由转让但无官方池子（OTC/P2P 模式）、总量固定（2100万）、销售占比（10%-20%）、以及后续的挖矿/贡献回馈。

这是一个非常典型的**“早期 DAO 治理代币分发”模型。在这个模型下，Token 不仅仅是钱，更是凭证。既然你倾向于使用 Juicebox 并在其基础上迭代，这是一个明智的选择，因为 Juicebox 的Funding Cycles（筹资周期）**机制天然契合你的“分阶段”诉求。

1. 推荐的销售机制A. 阶梯定价模式 (Tiered Fixed Price)这是最符合你描述的模式：价格根据销售额（或销售阶段）自动上浮。机制： 将 Token 分为若干轮次，例如第一轮 $0.1$U，卖完后自动进入第二轮 $0.12$U。优点： 确定性强，早期支持者能获得明显的“早鸟激励”。风险： 容易引发机器人抢购（Gas War），因为价格阶梯是确知的。B. 联合曲线模式 (Bonding Curve)价格不是跳跃式的，而是随着每一个 Token 的卖出平滑上升。机制： 价格 $P$ 是供应量 $S$ 的函数，例如 $P = k \cdot S$。优点： 真正的自动化价格发现，没有人能以低于当前市价的价格大量买入而不推高成本。建议： 适合长期、持续的销售，而不是短时间的抢购。C. 批量拍卖/LBP (Liquidity Bootstrapping Pool) —— 强烈推荐这是目前最成熟的社区启动方式，由 Balancer 普及。机制： 初始设置一个较高的价格，随着时间推移，如果没有人买，价格会自动缓慢下降。一旦有人购买，价格会因需求而回升。优点： * 极度抗机器人： 因为初始价格高，机器人冲进来就会亏钱。心理博弈平衡： 用户会在觉得价格合理时出手，最终价格由市场共识决定。符合公共物品精神： 参与者感觉是在“认购”而非“博弈”。

维度,建议配置,理由
准入门槛,早期社区成员白名单 (Allowlist),确保 Token 落入真正认可社区的人手中。
价格逻辑,指数型阶梯 (Exponential Tiers),比如每卖出 10%，价格上涨 15%。这能有效抑制投机囤货。
个人上限,硬性单地址限额 (Individual Cap),非常重要。 既然是“门票”性质，应防止少数人买断治理权。
资金处理,锁仓/流支付 (Vesting),销售所得资金进入多签钱包，销售的 Token 可以分期释放给用户。

风险点,具体场景,应对建议
1. 场外诈骗 (OTC Scams),用户A想买，用户B说我有，结果A转了USDT，B没转币。,官方担保或工具：虽然没有流动性池，但社区可以推荐使用去中心化 OTC 平台（如 Sudoswap 的 OTC 功能或 Whales Market），或者由社区多签成员提供担保服务，减少早期支持者被骗的风险。
2. 价格双轨制,官方还在公售（比如 $0.5），但有人在群里 $0.3 抛售（因为他白名单 $0.1 买的）。这会破坏公售。,白名单限额 + 锁仓宣传：虽然技术上可转让，但你要在社区文化上强调“长期持有”。更硬核的办法是：白名单部分用线性释放合约分发（买到的是 claim 权），公售部分是现货。这样早期低价筹码无法砸盘。
3. 估值锚定混乱,没有 Uniswap 价格，大家不知道这币到底值多少钱。,官网即时看板：在你的官网做一个 Dashboard，显示“当前官方销售价格”、“当前金库资产净值(NAV)”。让大家心理有个底——“官方还在卖 $0.5，我不应该 $0.2 卖出去”。

Launchpad 构想：

Juicebox 协议本身就是无许可（Permissionless）的。你现在部署的只是“第1号项目”。

未来，你的前端界面（Frontend）可以升级。除了展示你自己的 Token，还可以开放给社区成员，让他们通过你的界面、复用你的合约模板（比如你设定好的防砸盘机制）来发布他们的小项目。

这也为你这一期的 Governance Token 增加了价值捕获：未来在这个 Launchpad 上发币的项目，可能需要向社区金库缴纳 1% 的费用，或者持有你的 Token 才能发射。

Safe (Gnosis Safe) 多签集成：

这是标准操作。 在 Juicebox 配置中，你会设置一个 Payout Address（收款地址）和 Owner（所有权地址）。

你直接填入你们的 Safe 多签钱包地址即可。资金在销售过程中会停留在 Juicebox 合约里，当你点击“取款”或每个周期结束结算时，钱会直接打入 Safe 多签钱包，非常安全。

Juicebox 使用 Funding Cycles (FC) 来管理时间段。你可以设置不同的周期来实现价格变化。

配置思路：

FC #1 (白名单阶段): * 时长： 比如 3 天。

Weight (兑换率): 设置较高。例如 1 ETH = 10,000 Token (价格 $0.3)。

Allowlist: 开启白名单插件，只有名单内地址可调用 Pay。

FC #2 (公售第一阶): * 时长： 比如 7 天。

Weight: 下调权重。例如 1 ETH = 8,000 Token (价格 $0.375，实现涨价)。

Allowlist: 关闭（任何人可买）。

FC #3 (公售第二阶/结束): * Weight: 继续下调或设为 0（停止售卖）。

2. 如何控制“总量 2100万”和“只卖 20%”？
Juicebox 默认是无限增发的，但你可以通过数学配置来锁死上限。

配置思路：

Reserved Rate (预留率): 这是一个大杀器。你可以设置比如 50%。这意味着用户买 1 个币，实际上协议铸造了 2 个币，用户拿 1 个，另外 1 个自动进入社区金库（用于你说的后续挖矿、空投储备）。

Funding Target (筹款上限): 设置一个硬顶。例如你只想卖 420万个币 (20% of 2100万)，按均价算出一个 ETH 总额上限。一旦筹满，合约自动拒绝收款。

后续挖掘部分： 销售结束后，剩余的 Token 可以通过 Owner 权限一次性铸造到多签钱包，或者利用 Juicebox 的预留代币机制随着时间慢慢释放。

3. 关于“自由转让但无流动性池”
Juicebox 原生支持： Juicebox 发行的 Token 标准就是 ERC-20。

你的需求： 用户买到后，钱包里立刻就有币。他们可以转给朋友，也可以在微信群里私下担保交易（OTC）。

符合度： 100%。你不需要写任何代码来限制或开启转账，只需要不去 Uniswap 建池子即可。


二、 基于 Juicebox 的实施建议（优缺点分析）
虽然 Juicebox 很强，但直接用原版 UI 可能无法完美满足你“阶梯涨价”的平滑感（它更多是跳跃式的）。

方案 A：直接使用 Juicebox 官网/协议（最省力，但在价格曲线上有妥协）
做法： 在 Juicebox.money 上配置 2-3 个 Funding Cycles。

优点： 零代码开发，只要会配置参数；资金直接进入审计过的合约，极度安全；自带退款（Redemption）功能设置。

缺点： 价格变化是“台阶式”的（第一周便宜，第二周贵），无法做到“每卖 1000U 涨价 1%”这种平滑曲线。

适用性： 如果你能接受“分三轮涨价”而不是“实时涨价”，这是最佳选择。

方案 B：基于 JB 协议开发一个自定义的前端/中间件（推荐）
做法： 合约层依然使用 Juicebox 的底层（JBController, JBDirectory），但自己写一个简易的前端或中间层合约。

逻辑：

部署一个 ProjectPayer 合约。

用户跟你的前端交互。

你的合约根据当前已筹金额计算出精确的价格（可以做平滑曲线）。

你的合约调用 Juicebox 协议进行结算和发币。

优点： 既利用了 Juicebox 的资金管理安全性，又实现了你想要的“根据销售额平滑涨价”。